/*
  Translation system for Factify
  - Hardcoded dictionary for English (en) and Hindi (hi)
  - Elements to translate must have:
      - data-i18n="key" for textContent
      - data-i18n-placeholder="key" for placeholder attributes on inputs/textarea
  - Default language is English on first load. Persist choice in localStorage.
*/

(function () {
  const STORAGE_KEY = 'factify_lang';
  const DEFAULT_LANG = 'en';

  const TRANSLATIONS = {
    // Header / Nav / Branding
    'logo.title': { en: 'Factify', hi: 'рдлреИрдХреНрдЯрд┐рдлрд╛рдИ' },
    'nav.home': { en: 'Home', hi: 'рд╣реЛрдо' },
    'nav.verifyImage': { en: 'Verify Image', hi: 'рдЗрдореЗрдЬ рд╕рддреНрдпрд╛рдкрди' },
    'nav.news': { en: 'Digital Literacy News', hi: 'рдбрд┐рдЬрд┐рдЯрд▓ рд╕рд╛рдХреНрд╖рд░рддрд╛ рд╕рдорд╛рдЪрд╛рд░' },
    'nav.mobileBot': { en: 'Mobile Bot', hi: 'рдореЛрдмрд╛рдЗрд▓ рдмреЙрдЯ' },
    'btn.lang': { en: 'EN / рд╣рд┐рдВ', hi: 'рд╣рд┐рдВ / EN' },
    'btn.getStarted': { en: 'Get Started', hi: 'рд╢реБрд░реВ рдХрд░реЗрдВ' },

    // Hero
    'badge.new': { en: 'New', hi: 'рдирдпрд╛' },
    'badge.tagline': { en: 'AI-Powered Misinformation Detection', hi: 'рдПрдЖрдИ-рд╕рдВрдЪрд╛рд▓рд┐рдд рднреНрд░рд╛рдордХ рд╕реВрдЪрдирд╛ рдкрд╣рдЪрд╛рди' },
    'hero.title': {
      en: 'Verify content. Build trust. Stay informed.',
      hi: 'рд╕рд╛рдордЧреНрд░реА рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВред рднрд░реЛрд╕рд╛ рдмрдирд╛рдПрдВред рд╕реВрдЪрд┐рдд рд░рд╣реЗрдВред'
    },
    'hero.subtitle': {
      en: 'Advanced AI-powered platform for detecting misinformation, scams, and false information across digital channels with 99.8% accuracy.',
      hi: 'рдЙрдиреНрдирдд рдПрдЖрдИ-рд╕рдВрдЪрд╛рд▓рд┐рдд рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЬреЛ рдбрд┐рдЬрд┐рдЯрд▓ рдЪреИрдирд▓реЛрдВ рдкрд░ рднреНрд░рд╛рдордХ рдЬрд╛рдирдХрд╛рд░реА, рдШреЛрдЯрд╛рд▓реЛрдВ рдФрд░ рдЭреВрдареА рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ 99.8% рд╕рдЯреАрдХрддрд╛ рдХреЗ рд╕рд╛рде рдкрддрд╛ рд▓рдЧрд╛рддрд╛ рд╣реИред'
    },
    'btn.startVerification': { en: 'Start Verification', hi: 'рд╕рддреНрдпрд╛рдкрди рд╢реБрд░реВ рдХрд░реЗрдВ' },
    'btn.exploreLearning': { en: 'Explore Learning Center', hi: 'рд▓рд░реНрдирд┐рдВрдЧ рд╕реЗрдВрдЯрд░ рджреЗрдЦреЗрдВ' },

    // Stats
    'stats.title': { en: 'Real-Time Impact', hi: 'рд░рд┐рдпрд▓-рдЯрд╛рдЗрдо рдкреНрд░рднрд╛рд╡' },
    'stats.subtitle': { en: 'Live statistics from our global misinformation detection network', hi: 'рд╣рдорд╛рд░реЗ рд╡реИрд╢реНрд╡рд┐рдХ рднреНрд░рд╛рдордХ рд╕реВрдЪрдирд╛ рдкрд╣рдЪрд╛рди рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рд▓рд╛рдЗрд╡ рдЖрдБрдХрдбрд╝реЗ' },
    'stats.totalVerifications': { en: 'Total Verifications', hi: 'рдХреБрд▓ рд╕рддреНрдпрд╛рдкрди' },
    'stats.trendVerifications': { en: '+12% this week', hi: 'рдЗрд╕ рд╕рдкреНрддрд╛рд╣ +12%' },
    'stats.scamsDetected': { en: 'Scams Detected', hi: 'рдкрддрд╛ рд▓рдЧрд╛рдП рдЧрдП рдШреЛрдЯрд╛рд▓реЗ' },
    'stats.trendScams': { en: '+8% this week', hi: 'рдЗрд╕ рд╕рдкреНрддрд╛рд╣ +8%' },
    'stats.usersEducated': { en: 'Users Educated', hi: 'рд╢рд┐рдХреНрд╖рд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛' },
    'stats.trendUsers': { en: '+15% this week', hi: 'рдЗрд╕ рд╕рдкреНрддрд╛рд╣ +15%' },
    'stats.accuracyRate': { en: 'Accuracy Rate', hi: 'рд╕рдЯреАрдХрддрд╛ рджрд░' },
    'stats.trendAccuracy': { en: '+0.2% this month', hi: 'рдЗрд╕ рдорд╣реАрдиреЗ +0.2%' },
    'stats.liveFeed': { en: 'Live Verification Feed', hi: 'рд▓рд╛рдЗрд╡ рд╕рддреНрдпрд╛рдкрди рдлреАрдб' },
    'stats.sampleFeed': { en: 'Health claim verified from WHO source', hi: 'рдбрдмреНрд▓реНрдпреВрдПрдЪрдУ рд╕реНрд░реЛрдд рд╕реЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рджрд╛рд╡рд╛ рд╕рддреНрдпрд╛рдкрд┐рдд' },
    'stats.sampleTime': { en: '2s ago', hi: '2 рд╕реЗрдХрдВрдб рдкрд╣рд▓реЗ' },

    // Verify Section
    'verify.title': { en: 'Image Verification', hi: 'рдЗрдореЗрдЬ рд╕рддреНрдпрд╛рдкрди' },
    'verify.subtitle': { en: 'Upload an image to check for misinformation, AI generation, and extract text', hi: 'рднреНрд░рд╛рдордХ рдЬрд╛рдирдХрд╛рд░реА, рдПрдЖрдИ рдЬрдирд░реЗрд╢рди рдХреА рдЬрд╛рдБрдЪ рдФрд░ рдкрд╛рда рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ' },
    'upload.click': { en: 'Click to upload', hi: 'рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ' },
    'upload.or': { en: ' or drag and drop your image here', hi: ' рдпрд╛ рдЕрдкрдиреА рдЫрд╡рд┐ рдпрд╣рд╛рдБ рдЦреАрдВрдЪрдХрд░ рдЫреЛрдбрд╝реЗрдВ' },
    'upload.hint': { en: 'PNG, JPG, JPEG up to 10MB', hi: 'PNG, JPG, JPEG 10MB рддрдХ' },

    // OCR
    'ocr.title': { en: 'ЁЯУЭ Extracted Text (OCR)', hi: 'ЁЯУЭ рдирд┐рдХрд╛рд▓рд╛ рдЧрдпрд╛ рдкрд╛рда (рдУрд╕реАрдЖрд░)' },
    'ocr.placeholder': { en: 'No text detected in image...', hi: 'рдЫрд╡рд┐ рдореЗрдВ рдХреЛрдИ рдкрд╛рда рдирд╣реАрдВ рдорд┐рд▓рд╛...' },
    'ocr.copy': { en: 'Copy Text', hi: 'рдкрд╛рда рдХреЙрдкреА рдХрд░реЗрдВ' },
    'ocr.analyze': { en: 'Analyze Extracted Text', hi: 'рдирд┐рдХрд╛рд▓реЗ рдЧрдП рдкрд╛рда рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ' },

    // AI Detection
    'ai.title': { en: 'ЁЯдЦ AI Generation Analysis', hi: 'ЁЯдЦ рдПрдЖрдИ рдЬрдирд░реЗрд╢рди рд╡рд┐рд╢реНрд▓реЗрд╖рдг' },

    // Input actions
    'verify.analyzeNow': { en: 'Analyze Now', hi: 'рдЕрднреА рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ' },
    'verify.clear': { en: 'Clear', hi: 'рд╣рдЯрд╛рдПрдБ' },
    'verify.processing': { en: 'Analyzing Content...', hi: 'рд╕рд╛рдордЧреНрд░реА рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╣реЛ рд░рд╣рд╛ рд╣реИ...' },

    // Results
    'results.title': { en: 'Verification Results', hi: 'рд╕рддреНрдпрд╛рдкрди рдкрд░рд┐рдгрд╛рдо' },
    'results.confidenceLabel': { en: 'Confidence Level', hi: 'рд╡рд┐рд╢реНрд╡рд╛рд╕ рд╕реНрддрд░' },
    'results.analysisComplete': { en: 'Analysis Complete', hi: 'рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреВрд░реНрдг' },
    'results.recommendations': { en: 'Recommendations', hi: 'рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ' },

    // Chat
    'chat.title': { en: 'AI Fact-Check Assistant', hi: 'рдПрдЖрдИ рдлреИрдХреНрдЯ-рдЪреЗрдХ рд╕рд╣рд╛рдпрдХ' },
    'chat.online': { en: 'Online', hi: 'рдСрдирд▓рд╛рдЗрди' },
    'chat.welcome': {
      en: "Hi! I'm your AI fact-checking assistant. I can help you verify information, check sources, and provide detailed analysis. What would you like to fact-check today?",
      hi: 'рдирдорд╕реНрддреЗ! рдореИрдВ рдЖрдкрдХрд╛ рдПрдЖрдИ рдлреИрдХреНрдЯ-рдЪреЗрдХрд┐рдВрдЧ рд╕рд╣рд╛рдпрдХ рд╣реВрдБред рдореИрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ, рд╕реНрд░реЛрдд рдЬрд╛рдВрдЪрдиреЗ рдФрд░ рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдБред рдЖрдЬ рдЖрдк рдХреНрдпрд╛ рддрдереНрдп-рдЬрд╛рдБрдЪ рдХрд░рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?'
    },
    'chat.suggest1': { en: 'Is this news article credible?', hi: 'рдХреНрдпрд╛ рдпрд╣ рд╕рдорд╛рдЪрд╛рд░ рд▓реЗрдЦ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╣реИ?' },
    'chat.suggest2': { en: 'Check this health claim', hi: 'рдЗрд╕ рд╕реНрд╡рд╛рд╕реНрдереНрдп рджрд╛рд╡реЗ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ' },
    'chat.suggest3': { en: 'Verify this social media post', hi: 'рдЗрд╕ рд╕реЛрд╢рд▓ рдореАрдбрд┐рдпрд╛ рдкреЛрд╕реНрдЯ рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ' },
    'chat.suggest4': { en: 'Is this a scam?', hi: 'рдХреНрдпрд╛ рдпрд╣ рдПрдХ рдШреЛрдЯрд╛рд▓рд╛ рд╣реИ?' },
    'chat.placeholder': { en: 'Ask me to fact-check anything...', hi: 'рдореБрдЭрд╕реЗ рдХреБрдЫ рднреА рддрдереНрдп-рдЬрд╛рдБрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣реЗрдВ...' },
    'chat.send': { en: 'Send', hi: 'рднреЗрдЬреЗрдВ' },
    'chat.clear': { en: 'Clear', hi: 'рд╣рдЯрд╛рдПрдБ' },

    // API Status
    'api.title': { en: 'ЁЯФз API Services Status', hi: 'ЁЯФз рдПрдкреАрдЖрдИ рд╕реЗрд╡рд╛рдУрдВ рдХреА рд╕реНрдерд┐рддрд┐' },
    'api.subtitle': { en: 'Check if all backend services are working properly', hi: 'рдЬрд╛рдБрдЪреЗрдВ рдХрд┐ рд╕рднреА рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛рдПрдБ рд╕рд╣реА рд╕реЗ рдХрд╛рд░реНрдп рдХрд░ рд░рд╣реА рд╣реИрдВ рдпрд╛ рдирд╣реАрдВ' },
    'api.check': { en: 'Check Status', hi: 'рд╕реНрдерд┐рддрд┐ рдЬрд╛рдБрдЪреЗрдВ' },
    'api.gemini.title': { en: 'Gemini AI', hi: 'рдЬреЗрдорд┐рдиреА рдПрдЖрдИ' },
    'api.gemini.desc': { en: 'Advanced fact-checking and content analysis', hi: 'рдЙрдиреНрдирдд рдлреИрдХреНрдЯ-рдЪреЗрдХрд┐рдВрдЧ рдФрд░ рд╕рд╛рдордЧреНрд░реА рд╡рд┐рд╢реНрд▓реЗрд╖рдг' },
    'api.hf.title': { en: 'Hugging Face', hi: 'рд╣рдЧрд┐рдВрдЧ рдлреЗрд╕' },
    'api.hf.desc': { en: 'Sentiment analysis and text classification', hi: 'рднрд╛рд╡ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдФрд░ рдкрд╛рда рд╡рд░реНрдЧреАрдХрд░рдг' },
    'api.ocr.title': { en: 'OCR.space', hi: 'OCR.space' },
    'api.ocr.desc': { en: 'Text extraction from images', hi: 'рдЫрд╡рд┐рдпреЛрдВ рд╕реЗ рдкрд╛рда рдирд┐рдХрд╛рд▓рдирд╛' },
    'api.se.title': { en: 'SightEngine', hi: 'рд╕рд╛рдЗрдЯрдЗрдВрдЬрди' },
    'api.se.desc': { en: 'Content moderation and image analysis', hi: 'рд╕рд╛рдордЧреНрд░реА рд╕рдВрдпрдо рдФрд░ рдЫрд╡рд┐ рд╡рд┐рд╢реНрд▓реЗрд╖рдг' },
    'api.checking': { en: 'Checking...', hi: 'рдЬрд╛рдБрдЪ рд╣реЛ рд░рд╣реА рд╣реИ...' },
    'api.testing': { en: 'Testing connection...', hi: 'рдХрдиреЗрдХреНрд╢рди рдкрд░реАрдХреНрд╖рдг...' },
    'api.lastNever': { en: 'Last tested: Never', hi: 'рдЕрдВрддрд┐рдо рдкрд░реАрдХреНрд╖рдг: рдХрднреА рдирд╣реАрдВ' },
    'api.overall': { en: 'Overall Status', hi: 'рд╕рдордЧреНрд░ рд╕реНрдерд┐рддрд┐' },
    'api.summary': { en: 'Click "Check Status" to test all services', hi: 'рд╕рднреА рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП "рд╕реНрдерд┐рддрд┐ рдЬрд╛рдБрдЪреЗрдВ" рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ' },

    // News
    'news.title': { en: 'Digital Literacy News Center', hi: 'рдбрд┐рдЬрд┐рдЯрд▓ рд╕рд╛рдХреНрд╖рд░рддрд╛ рдиреНрдпреВрдЬрд╝ рд╕реЗрдВрдЯрд░' },
    'news.subtitle': { en: 'Stay informed about the latest in misinformation detection, digital literacy, and cybersecurity', hi: 'рднреНрд░рд╛рдордХ рд╕реВрдЪрдирд╛ рдкрд╣рдЪрд╛рди, рдбрд┐рдЬрд┐рдЯрд▓ рд╕рд╛рдХреНрд╖рд░рддрд╛ рдФрд░ рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛ рдореЗрдВ рдирд╡реАрдирддрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд░рдЦреЗрдВ' },
    'news.cat.all': { en: 'All Articles', hi: 'рд╕рднреА рд▓реЗрдЦ' },
    'news.cat.health': { en: 'Health', hi: 'рд╕реНрд╡рд╛рд╕реНрдереНрдп' },
    'news.cat.politics': { en: 'Politics', hi: 'рд░рд╛рдЬрдиреАрддрд┐' },
    'news.cat.financial': { en: 'Financial', hi: 'рд╡рд┐рддреНрдд' },
    'news.cat.technology': { en: 'Technology', hi: 'рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА' },
    'news.cat.education': { en: 'Education', hi: 'рд╢рд┐рдХреНрд╖рд╛' },
    'news.cat.ai': { en: 'AI & Deepfakes', hi: 'рдПрдЖрдИ рдФрд░ рдбреАрдкрдлреЗрдХреНрд╕' },
    'news.featured': { en: 'Featured Articles', hi: 'рд╡рд┐рд╢реЗрд╖ рд▓реЗрдЦ' },
    'news.searchTitle': { en: 'Search Articles', hi: 'рд▓реЗрдЦ рдЦреЛрдЬреЗрдВ' },
    'news.searchPlaceholder': { en: 'Search articles...', hi: 'рд▓реЗрдЦ рдЦреЛрдЬреЗрдВ...' },
    'news.sort.newest': { en: 'Newest First', hi: 'рдирдП рдкрд╣рд▓реЗ' },
    'news.sort.oldest': { en: 'Oldest First', hi: 'рдкреБрд░рд╛рдиреЗ рдкрд╣рд▓реЗ' },
    'news.sort.relevance': { en: 'Most Relevant', hi: 'рд╕рдмрд╕реЗ рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ' },
    'news.sort.trending': { en: 'Trending', hi: 'рдЯреНрд░реЗрдВрдбрд┐рдВрдЧ' },
    'news.source.all': { en: 'All Sources', hi: 'рд╕рднреА рд╕реНрд░реЛрдд' },
    'news.source.reuters': { en: 'Reuters', hi: 'рд░реЙрдпрдЯрд░реНрд╕' },
    'news.source.bbc': { en: 'BBC', hi: 'рдмреАрдмреАрд╕реА' },
    'news.source.guardian': { en: 'The Guardian', hi: 'рдж рдЧрд╛рд░реНрдЬрд┐рдпрди' },
    'news.source.who': { en: 'WHO', hi: 'рдбрдмреНрд▓реНрдпреВрдПрдЪрдУ' },
    'news.source.cdc': { en: 'CDC', hi: 'рд╕реАрдбреАрд╕реА' },
    'news.recent': { en: 'Recent Articles', hi: 'рд╣рд╛рд▓ рдХреЗ рд▓реЗрдЦ' },
    'news.trusted': { en: 'Trusted Sources', hi: 'рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╕реНрд░реЛрдд' },

    // Bot
    'bot.title': { en: 'Continue on Mobile', hi: 'рдореЛрдмрд╛рдЗрд▓ рдкрд░ рдЬрд╛рд░реА рд░рдЦреЗрдВ' },
    'bot.subtitle': { en: 'Access Factify verification tools directly from your messaging apps', hi: 'рдЕрдкрдиреЗ рдореИрд╕реЗрдЬрд┐рдВрдЧ рдРрдк рд╕реЗ рд╕реАрдзреЗ рдлреИрдХреНрдЯрд┐рдлрд╛рдИ рд╕рддреНрдпрд╛рдкрди рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ' },
    'bot.whatsapp.title': { en: 'WhatsApp Verification', hi: 'рд╡реНрд╣рд╛рдЯреНрд╕рдРрдк рд╕рддреНрдпрд╛рдкрди' },
    'bot.whatsapp.desc': { en: 'Send suspicious messages directly to our WhatsApp bot for instant verification', hi: 'рддрддреНрдХрд╛рд▓ рд╕рддреНрдпрд╛рдкрди рдХреЗ рд▓рд┐рдП рд╕рдВрджрд┐рдЧреНрдз рд╕рдВрджреЗрд╢ рд╕реАрдзреЗ рд╣рдорд╛рд░реЗ рд╡реНрд╣рд╛рдЯреНрд╕рдРрдк рдмреЙрдЯ рдХреЛ рднреЗрдЬреЗрдВ' },
    'bot.whatsapp.cta': { en: 'Start WhatsApp Chat', hi: 'рд╡реНрд╣рд╛рдЯреНрд╕рдРрдк рдЪреИрдЯ рд╢реБрд░реВ рдХрд░реЗрдВ' },
    'bot.telegram.title': { en: 'Telegram Bot', hi: 'рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдмреЙрдЯ' },
    'bot.telegram.desc': { en: 'Use our Telegram bot for quick content verification and educational resources', hi: 'рддреНрд╡рд░рд┐рдд рд╕рд╛рдордЧреНрд░реА рд╕рддреНрдпрд╛рдкрди рдФрд░ рд╢реИрдХреНрд╖рд┐рдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдмреЙрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ' },
    'bot.telegram.cta': { en: 'Open Telegram Bot', hi: 'рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдмреЙрдЯ рдЦреЛрд▓реЗрдВ' },

    // Footer
    'footer.about': { en: 'About Factify', hi: 'рдлреИрдХреНрдЯрд┐рдлрд╛рдИ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ' },
    'footer.mission': { en: 'Our Mission', hi: 'рд╣рдорд╛рд░рд╛ рдорд┐рд╢рди' },
    'footer.howItWorks': { en: 'How It Works', hi: 'рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ' },
    'footer.trustSafety': { en: 'Trust & Safety', hi: 'рд╡рд┐рд╢реНрд╡рд╛рд╕ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛' },
    'footer.helpSupport': { en: 'Help & Support', hi: 'рдорджрдж рдФрд░ рд╕рд╣рд╛рдпрддрд╛' },
    'footer.faqs': { en: 'FAQs', hi: 'рдЕрдХреНрд╕рд░ рдкреВрдЫреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╢реНрди' },
    'footer.contact': { en: 'Contact Support', hi: 'рд╕рдкреЛрд░реНрдЯ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ' },
    'footer.report': { en: 'Report Misinformation', hi: 'рднреНрд░рд╛рдордХ рдЬрд╛рдирдХрд╛рд░реА рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХрд░реЗрдВ' },
    'footer.resources': { en: 'Resources', hi: 'рд╕рдВрд╕рд╛рдзрди' },
    'footer.learningCenter': { en: 'Learning Center', hi: 'рд▓рд░реНрдирд┐рдВрдЧ рд╕реЗрдВрдЯрд░' },
    'footer.guides': { en: 'Digital Literacy Guides', hi: 'рдбрд┐рдЬрд┐рдЯрд▓ рд╕рд╛рдХреНрд╖рд░рддрд╛ рдЧрд╛рдЗрдб' },
    'footer.trustedSources': { en: 'Trusted Sources', hi: 'рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╕реНрд░реЛрдд' },
    'footer.legal': { en: 'Legal', hi: 'рдХрд╛рдиреВрдиреА' },
    'footer.privacy': { en: 'Privacy Policy', hi: 'рдЧреЛрдкрдиреАрдпрддрд╛ рдиреАрддрд┐' },
    'footer.terms': { en: 'Terms of Use', hi: 'рдЙрдкрдпреЛрдЧ рдХреА рд╢рд░реНрддреЗрдВ' },
    'footer.accessibility': { en: 'Accessibility', hi: 'рд╕реБрд▓рднрддрд╛' },
    'footer.tagline': { en: 'Made for safer, informed digital experiences', hi: 'рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рд╕реВрдЪрд┐рдд рдбрд┐рдЬрд┐рдЯрд▓ рдЕрдиреБрднрд╡реЛрдВ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдпрд╛ рдЧрдпрд╛' }
  };

  function getCurrentLang() {
    try {
      const saved = localStorage.getItem(STORAGE_KEY);
      return saved === 'en' || saved === 'hi' ? saved : DEFAULT_LANG;
    } catch {
      return DEFAULT_LANG;
    }
  }

  function setCurrentLang(lang) {
    try {
      localStorage.setItem(STORAGE_KEY, lang);
    } catch {}
  }

  function translateElement(el, lang) {
    const key = el.getAttribute('data-i18n');
    if (!key) return;
    const entry = TRANSLATIONS[key];
    if (!entry) return;
    el.textContent = entry[lang] ?? entry[DEFAULT_LANG] ?? '';
  }

  function translatePlaceholder(el, lang) {
    const key = el.getAttribute('data-i18n-placeholder');
    if (!key) return;
    const entry = TRANSLATIONS[key];
    if (!entry) return;
    el.setAttribute('placeholder', entry[lang] ?? entry[DEFAULT_LANG] ?? '');
  }

  function applyTranslations(lang) {
    // Update html lang attribute
    document.documentElement.setAttribute('lang', lang);

    // Translate text nodes
    document.querySelectorAll('[data-i18n]').forEach((el) => translateElement(el, lang));

    // Translate placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach((el) => translatePlaceholder(el, lang));

    // Apply convention-based translations for live feed and news articles
    applyLiveFeedTranslations(lang);
    applyNewsArticleTranslations(lang);
  }

  function toggleLanguage() {
    const current = getCurrentLang();
    const next = current === 'en' ? 'hi' : 'en';
    setCurrentLang(next);
    applyTranslations(next);
  }

  // Initialize on DOM ready
  document.addEventListener('DOMContentLoaded', function () {
    const lang = getCurrentLang(); // defaults to en if none
    applyTranslations(lang);

    const toggleBtn = document.getElementById('languageToggle');
    if (toggleBtn) {
      toggleBtn.addEventListener('click', toggleLanguage);
    }

    // Observe and auto-translate dynamically added nodes carrying data-i18n attributes
    initMutationObserver();
  });
  
  // ----------------------
  // Dynamic content support
  // ----------------------
  // Convention-based keys for dynamic sections:
  // - Live feed items: use container with attribute data-feed-id="<id>"
  //   and child parts with data-i18n-part="text" | "time" | "status"
  //   Keys resolved as: stats.feed.<id>.<part>
  // - News articles: use container with attribute data-article-id="<id>"
  //   and child parts with data-i18n-part="title" | "desc" | "body" | "author" | "cta"
  //   Keys resolved as: news.article.<id>.<part>

  // Example entries (can be removed/extended by your data):
  Object.assign(TRANSLATIONS, {
    // Live feed example
    'stats.feed.sample1.text': {
      en: 'Vaccination update verified via Reuters',
      hi: 'рд░реЙрдпрдЯрд░реНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЯреАрдХрд╛рдХрд░рдг рдЕрдкрдбреЗрдЯ рд╕рддреНрдпрд╛рдкрд┐рдд'
    },
    'stats.feed.sample1.time': { en: '5s ago', hi: '5 рд╕реЗрдХрдВрдб рдкрд╣рд▓реЗ' },
    'stats.feed.sample1.status': { en: 'Verified', hi: 'рд╕рддреНрдпрд╛рдкрд┐рдд' },

    // News article examples
    'news.article.sample1.title': { en: 'How to Spot Deepfakes', hi: 'рдбреАрдкрдлреЗрдХреНрд╕ рдХреЛ рдкрд╣рдЪрд╛рдиреЗрдВ рдХреИрд╕реЗ' },
    'news.article.sample1.desc': { en: 'A quick guide to identifying synthetic media online.', hi: 'рдСрдирд▓рд╛рдЗрди рд╕рд┐рдВрдереЗрдЯрд┐рдХ рдореАрдбрд┐рдпрд╛ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреНрд╡рд░рд┐рдд рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛ред' },
    'news.article.sample1.body': {
      en: 'Deepfakes use AI techniques to create realistic fake audio or video. Check for visual artifacts, inconsistent lighting, and verify sources.',
      hi: 'рдбреАрдкрдлреЗрдХреНрд╕ рдПрдЖрдИ рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпрдерд╛рд░реНрдерд╡рд╛рджреА рдирдХрд▓реА рдСрдбрд┐рдпреЛ рдпрд╛ рд╡реАрдбрд┐рдпреЛ рдмрдирд╛рддреЗ рд╣реИрдВред рджреГрд╢реНрдп рдЦрд╛рдорд┐рдпреЛрдВ, рдЕрд╕рдВрдЧрдд рд░реЛрд╢рдиреА рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ рдФрд░ рд╕реНрд░реЛрддреЛрдВ рдХрд╛ рд╕рддреНрдпрд╛рдкрди рдХрд░реЗрдВред'
    },
    'news.article.sample1.author': { en: 'By Factify Team', hi: 'рдлреИрдХреНрдЯрд┐рдлрд╛рдИ рдЯреАрдо рджреНрд╡рд╛рд░рд╛' },
    'news.article.sample1.cta': { en: 'Read More', hi: 'рдФрд░ рдкрдврд╝реЗрдВ' }
  });

  // Add translations for static sample articles embedded in index.html
  Object.assign(TRANSLATIONS, {
    // Featured Article a1
    'news.article.a1.title': { en: 'How to Spot Deepfakes', hi: 'рдбреАрдкрдлреЗрдХреНрд╕ рдХреЛ рдкрд╣рдЪрд╛рдиреЗрдВ рдХреИрд╕реЗ' },
    'news.article.a1.desc': { en: 'A quick guide to identifying synthetic media online.', hi: 'рдСрдирд▓рд╛рдЗрди рд╕рд┐рдВрдереЗрдЯрд┐рдХ рдореАрдбрд┐рдпрд╛ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреНрд╡рд░рд┐рдд рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛ред' },
    'news.article.a1.body': {
      en: 'Deepfakes use AI techniques to create realistic fake audio or video. Check for visual artifacts, inconsistent lighting, and verify sources.',
      hi: 'рдбреАрдкрдлреЗрдХреНрд╕ рдПрдЖрдИ рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпрдерд╛рд░реНрдерд╡рд╛рджреА рдирдХрд▓реА рдСрдбрд┐рдпреЛ рдпрд╛ рд╡реАрдбрд┐рдпреЛ рдмрдирд╛рддреЗ рд╣реИрдВред рджреГрд╢реНрдп рдЦрд╛рдорд┐рдпреЛрдВ, рдЕрд╕рдВрдЧрдд рд░реЛрд╢рдиреА рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ рдФрд░ рд╕реНрд░реЛрддреЛрдВ рдХрд╛ рд╕рддреНрдпрд╛рдкрди рдХрд░реЗрдВред'
    },
    'news.article.a1.author': { en: 'By Factify Team', hi: 'рдлреИрдХреНрдЯрд┐рдлрд╛рдИ рдЯреАрдо рджреНрд╡рд╛рд░рд╛' },
    'news.article.a1.cta': { en: 'Read More', hi: 'рдФрд░ рдкрдврд╝реЗрдВ' },

    // Article a2
    'news.article.a2.title': { en: 'Debunking Viral Health Myths', hi: 'рд╡рд╛рдпрд░рд▓ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдорд┐рдердХреЛрдВ рдХрд╛ рднрдВрдбрд╛рдлреЛрдбрд╝' },
    'news.article.a2.desc': { en: 'Separate facts from fiction in trending health posts.', hi: 'рдЯреНрд░реЗрдВрдбрд┐рдВрдЧ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкреЛрд╕реНрдЯ рдореЗрдВ рддрдереНрдпреЛрдВ рдФрд░ рдХрд▓реНрдкрдирд╛ рдХреЛ рдЕрд▓рдЧ рдХрд░реЗрдВред' },
    'news.article.a2.body': {
      en: 'Verify claims with trusted sources like WHO or CDC. Watch for miracle cures, absolute statements, and missing citations.',
      hi: 'рдбрдмреНрд▓реНрдпреВрдПрдЪрдУ рдпрд╛ рд╕реАрдбреАрд╕реА рдЬреИрд╕реЗ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╕реНрд░реЛрддреЛрдВ рд╕реЗ рджрд╛рд╡реЛрдВ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВред рдЪрдорддреНрдХрд╛рд░реА рдЗрд▓рд╛рдЬ, рдкреВрд░реНрдг рдХрдерди рдФрд░ рдЧрд╛рдпрдм рд╕рдВрджрд░реНрднреЛрдВ рд╕реЗ рд╕рд╛рд╡рдзрд╛рди рд░рд╣реЗрдВред'
    },
    'news.article.a2.author': { en: 'By Factify Team', hi: 'рдлреИрдХреНрдЯрд┐рдлрд╛рдИ рдЯреАрдо рджреНрд╡рд╛рд░рд╛' },
    'news.article.a2.cta': { en: 'Read More', hi: 'рдФрд░ рдкрдврд╝реЗрдВ' },

    // Article a3
    'news.article.a3.title': { en: 'Check Before You Share', hi: 'рд╢реЗрдпрд░ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЬрд╛рдБрдЪреЗрдВ' },
    'news.article.a3.desc': { en: 'Quick steps to verify political claims on social media.', hi: 'рд╕реЛрд╢рд▓ рдореАрдбрд┐рдпрд╛ рдкрд░ рд░рд╛рдЬрдиреАрддрд┐рдХ рджрд╛рд╡реЛрдВ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ рдХреЗ рддреНрд╡рд░рд┐рдд рдХрджрдоред' },
    'news.article.a3.body': {
      en: 'Look for original source links, cross-check with reputable outlets, and beware of edited screenshots lacking context.',
      hi: 'рдореВрд▓ рд╕реНрд░реЛрдд рд▓рд┐рдВрдХ рджреЗрдЦреЗрдВ, рдкреНрд░рддрд┐рд╖реНрдард┐рдд рдЖрдЙрдЯрд▓реЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдХреНрд░реЙрд╕-рдЪреЗрдХ рдХрд░реЗрдВ, рдФрд░ рд╕рдВрджрд░реНрднрд╣реАрди рд╕рдВрдкрд╛рджрд┐рдд рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рд╕реЗ рд╕рд╛рд╡рдзрд╛рди рд░рд╣реЗрдВред'
    },
    'news.article.a3.author': { en: 'By Factify Team', hi: 'рдлреИрдХреНрдЯрд┐рдлрд╛рдИ рдЯреАрдо рджреНрд╡рд╛рд░рд╛' },
    'news.article.a3.cta': { en: 'Read More', hi: 'рдФрд░ рдкрдврд╝реЗрдВ' }
  });

  function applyLiveFeedTranslations(lang) {
    const items = document.querySelectorAll('[data-feed-id]');
    items.forEach((item) => {
      const id = item.getAttribute('data-feed-id');
      if (!id) return;

      const parts = [];
      // Preferred: explicit parts
      item.querySelectorAll('[data-i18n-part]').forEach((el) => parts.push(el));
      // Fallback: infer by common class names if explicit parts missing
      if (parts.length === 0) {
        const text = item.querySelector('.feed-text');
        const time = item.querySelector('.feed-time');
        const status = item.querySelector('.feed-status');
        if (text) parts.push(text);
        if (time) parts.push(time);
        if (status) parts.push(status);
      }

      parts.forEach((partEl) => {
        let part = partEl.getAttribute('data-i18n-part');
        if (!part) {
          if (partEl.classList.contains('feed-text')) part = 'text';
          else if (partEl.classList.contains('feed-time')) part = 'time';
          else if (partEl.classList.contains('feed-status')) part = 'status';
        }
        if (!part) return;
        const key = `stats.feed.${id}.${part}`;
        const entry = TRANSLATIONS[key];
        if (!entry) return;
        partEl.textContent = entry[lang] ?? entry[DEFAULT_LANG] ?? '';
      });
    });
  }

  function applyNewsArticleTranslations(lang, root = document) {
    const articles = root.querySelectorAll('[data-article-id]');
    articles.forEach((article) => {
      const id = article.getAttribute('data-article-id');
      if (!id) return;

      const parts = [];
      // Preferred: explicit parts
      article.querySelectorAll('[data-i18n-part]').forEach((el) => parts.push(el));
      // Fallback: infer by common class names
      if (parts.length === 0) {
        const title = article.querySelector('.article-title, h2, h3, h4');
        const desc = article.querySelector('.article-desc, .article-excerpt');
        const body = article.querySelector('.article-body, .content, p');
        const author = article.querySelector('.article-author');
        const cta = article.querySelector('.article-cta, .read-more');
        if (title) parts.push(title);
        if (desc) parts.push(desc);
        if (body) parts.push(body);
        if (author) parts.push(author);
        if (cta) parts.push(cta);
      }

      parts.forEach((partEl) => {
        let part = partEl.getAttribute('data-i18n-part');
        if (!part) {
          if (partEl.classList.contains('article-title')) part = 'title';
          else if (partEl.classList.contains('article-desc') || partEl.classList.contains('article-excerpt')) part = 'desc';
          else if (partEl.classList.contains('article-body') || partEl.classList.contains('content')) part = 'body';
          else if (partEl.classList.contains('article-author')) part = 'author';
          else if (partEl.classList.contains('article-cta') || partEl.classList.contains('read-more')) part = 'cta';
          // heuristic for headings and paragraphs when no specific class is present
          else if (/^H[2-4]$/.test(partEl.tagName)) part = 'title';
          else if (partEl.tagName === 'P') part = 'body';
        }
        if (!part) return;
        const key = `news.article.${id}.${part}`;
        const entry = TRANSLATIONS[key];
        if (!entry) return;
        partEl.textContent = entry[lang] ?? entry[DEFAULT_LANG] ?? '';
      });
    });
  }

  function initMutationObserver() {
    let scheduled = null;
    const scheduleApply = () => {
      if (scheduled) return;
      scheduled = setTimeout(() => {
        scheduled = null;
        applyTranslations(getCurrentLang());
      }, 50);
    };

    const observer = new MutationObserver((mutations) => {
      let needsApply = false;
      const lang = getCurrentLang();
      for (const m of mutations) {
        if (m.type === 'childList') {
          // Newly added nodes
          m.addedNodes.forEach((node) => {
            if (!(node instanceof Element)) return;
            // Translate any elements with data-i18n / data-i18n-placeholder
            if (node.hasAttribute && node.hasAttribute('data-i18n')) {
              translateElement(node, lang);
              needsApply = true;
            }
            if (node.hasAttribute && node.hasAttribute('data-i18n-placeholder')) {
              translatePlaceholder(node, lang);
              needsApply = true;
            }
            // Also process descendants
            node.querySelectorAll?.('[data-i18n]').forEach((el) => translateElement(el, lang));
            node.querySelectorAll?.('[data-i18n-placeholder]').forEach((el) => translatePlaceholder(el, lang));

            // Convention-based dynamic sections
            if (node.matches?.('[data-feed-id]')) needsApply = true;
            if (node.matches?.('[data-article-id]')) needsApply = true;
            if (node.querySelector?.('[data-feed-id]')) needsApply = true;
            if (node.querySelector?.('[data-article-id]')) needsApply = true;
          });
        } else if (m.type === 'attributes') {
          // If a data-i18n key changed, re-apply
          if (m.attributeName === 'data-i18n' || m.attributeName === 'data-i18n-placeholder') {
            needsApply = true;
          }
        } else if (m.type === 'characterData') {
          // Text content changed in place; schedule re-apply to keep consistent
          needsApply = true;
        }
      }
      if (needsApply) scheduleApply();
    });
    observer.observe(document.body, { childList: true, subtree: true, attributes: true, characterData: true, attributeFilter: ['data-i18n', 'data-i18n-placeholder'] });

    // Expose in case other scripts want to disconnect
    window.I18NObserver = observer;
  }

  // Expose a minimal API for other scripts (e.g., app.js) to use
  window.I18N = {
    t: (key, lang) => {
      const k = TRANSLATIONS[key];
      const l = lang || getCurrentLang();
      return k ? (k[l] ?? k[DEFAULT_LANG] ?? '') : '';
    },
    apply: () => applyTranslations(getCurrentLang()),
    setLang: (lang) => { setCurrentLang(lang); applyTranslations(lang); },
    getLang: getCurrentLang,
    translateElement: (el) => translateElement(el, getCurrentLang()),
    translatePlaceholder: (el) => translatePlaceholder(el, getCurrentLang()),
    applyLiveFeed: () => applyLiveFeedTranslations(getCurrentLang()),
    applyArticles: (root) => applyNewsArticleTranslations(getCurrentLang(), root || document),
    addTranslations: (obj) => Object.assign(TRANSLATIONS, obj)
  };
})();
